<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon_32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="A blog to save my notes">
<meta property="og:type" content="website">
<meta property="og:title" content="Melo&#39;s blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Melo&#39;s blog">
<meta property="og:description" content="A blog to save my notes">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/"/>





  <title>Melo's blog</title>
  








<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Melo's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Welcome</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/01/11/php-crash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/01/11/php-crash/" itemprop="url">php_crash</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-01-11T15:00:08+01:00">
                2024-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/12/16/LeetCodeExamples/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/12/16/LeetCodeExamples/" itemprop="url">LeetCodeExamples</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-12-16T15:59:23+01:00">
                2023-12-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/merge-sorted-array/">合并两个有序数组</a></li>
</ol>
<p>倒序双指针 避免覆盖</p>
<p>完全背包问题 动态规划</p>
<p>背包问题：<br>给定一个背包容量target，再给定一个数组nums(物品)，能否按一定方式选取nums中的元素得到target</p>
<p>1、背包容量target和物品nums的类型可能是数，也可能是字符串<br>2、target可能题目已经给出(显式)，也可能是需要我们从题目的信息中挖掘出来(非显式)(常见的非显式target比如sum/2等)<br>3、选取方式有常见的一下几种：每个元素选一次/每个元素选多次/选元素进行排列组合<br>那么对应的背包问题就是下面我们要讲的背包分类</p>
<p>常见的背包类型主要有以下几种：<br>1、0/1背包问题：每个元素最多选取一次<br>2、完全背包问题：每个元素可以重复选择<br>3、组合背包问题：背包中的物品要考虑顺序<br>4、分组背包问题：不止一个背包，需要遍历每个背包</p>
<p>而每个背包问题要求的也是不同的，按照所求问题分类，又可以分为以下几种：<br>1、最值问题：要求最大值/最小值<br>2、存在问题：是否存在…………，满足…………<br>3、组合问题：求所有满足……的排列组合</p>
<p><strong>通过不断求解小面额的解，一点点地逼近目标面额的最终解</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> math
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">coinChange</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> coins<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> amount<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token comment"># 创立动归表去跟踪每一个'子问题'的解, 所有元素初始都为infinity</span>
        dp <span class="token operator">=</span> <span class="token punctuation">[</span>math<span class="token punctuation">.</span>inf <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        
        <span class="token comment"># 总金额为0时，无法凑出解，所以为0</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>

        <span class="token triple-quoted-string string">'''
        遍历每一个子问题依次求解
        E.g. coins = &#123;1, 2, 5&#125;, amount = 7
        依次遍历 amount = 1, 2, 3, ..., 7求解
        对于每一个amount，尝试在之前已求解基础上添加一枚新的硬币 (面额 = 1 or 2 or 5)
        注意: 可能存在多解，但只选择花费硬币最少的解
        '''</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> coin <span class="token keyword">in</span> coins<span class="token punctuation">:</span>
                diff <span class="token operator">=</span> i <span class="token operator">-</span> coin
                <span class="token keyword">if</span> diff <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>diff<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token triple-quoted-string string">'''
        如果动归表最后一个元素(目标总金额)的值不为inf, 证明存在解，直接返回该值
        如果动归表最后一个元素的值仍然是inf, 代表无解, 返回-1
        '''</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> math<span class="token punctuation">.</span>inf <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们有一个列表 从[0, amount] 个子问题</p>
<p>从最初的问题开始dp[0] = 0,</p>
<p>对每个我们依次试每个硬币 从0到amount个问题</p>
<p>例如 amount = 7 coins = [1,3]</p>
<pre class="line-numbers language-none"><code class="language-none">dp[1] &#x3D; 1
dp[2] &#x3D; 2 (1+1)
diff &#x3D; 2 - 1 &#x3D; 1 我们求min(dp[1] + 1 和 dp[2] &#x3D; inf)
dp[3] 从 1开始
diff &#x3D; 3 - 1 &#x3D; 2 求 min(dp[2] + 1 &#x3D; 3 和 dp[3] &#x3D; inf)
然后是3 
diff &#x3D; 3 - 3 &#x3D; 0 求 min(dp[0] + 1 和 dp[3] &#x3D; 3)
dp[3] &#x3D; 1
由此求得每个小问题的zui&#39;you<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>打家劫舍 动态规划</li>
</ol>
<p>固定数组nums 不能偷相邻的房子</p>
<p>如何偷k间房子 f(k) = f(k-1) / f(k-2) + 最后一间</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">rob</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            dp<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>length<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>LRU 缓存 </li>
</ol>
<p>双链表实现</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>key <span class="token operator">=</span> key
        self<span class="token punctuation">.</span>value <span class="token operator">=</span> value
        self<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token keyword">class</span> <span class="token class-name">LRUCache</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> capacity<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity
        self<span class="token punctuation">.</span>hashmap <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
        self<span class="token punctuation">.</span>head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>tail <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 初始化链表为 head &lt;-> tail</span>
        self<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>tail
        self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> self<span class="token punctuation">.</span>head

    <span class="token keyword">def</span> <span class="token function">move_to_tail</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>
        node <span class="token operator">=</span> self<span class="token punctuation">.</span>hashmap<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        node<span class="token punctuation">.</span>prev<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token builtin">next</span>
        node<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> node<span class="token punctuation">.</span>prev

        node<span class="token punctuation">.</span>prev <span class="token operator">=</span> self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev
        node<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>tail
        self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> node
        self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> node

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> key <span class="token keyword">in</span> self<span class="token punctuation">.</span>hashmap<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>move_to_tail<span class="token punctuation">(</span>key<span class="token punctuation">)</span>
        result <span class="token operator">=</span> self<span class="token punctuation">.</span>hashmap<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> result <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> result
        <span class="token keyword">else</span><span class="token punctuation">:</span> 
            <span class="token keyword">return</span> result<span class="token punctuation">.</span>value


    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> key <span class="token keyword">in</span> self<span class="token punctuation">.</span>hashmap<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>hashmap<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
            self<span class="token punctuation">.</span>move_to_tail<span class="token punctuation">(</span>key<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>hashmap<span class="token punctuation">)</span> <span class="token operator">==</span> self<span class="token punctuation">.</span>capacity<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>hashmap<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>self<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>key<span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>
                self<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> self<span class="token punctuation">.</span>head
            new <span class="token operator">=</span> ListNode<span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>hashmap<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> new
            new<span class="token punctuation">.</span>prev <span class="token operator">=</span> self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev
            new<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>tail
            self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> new
            self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> new
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>删除有序数组中的重复项</li>
</ol>
<p>反转双指针</p>
<pre class="line-numbers language-none"><code class="language-none">class Solution:
    def removeDuplicates(self, nums: List[int]) -&gt; int:
        # 方二：双指针（反转）
        # 在一个序列中同向变动 + 改动原列表中的每个元素顺序（反转）
        left, right &#x3D; 0,1
        k&#x3D;1
        while right &lt; len(nums):
            if nums[left] &#x3D;&#x3D;nums[right]:
                right +&#x3D; 1
            else:
                nums[left+1],nums[right] &#x3D; nums[right],nums[left+1]
                left +&#x3D; 1
                right +&#x3D; 1
                k +&#x3D; 1
        return k<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>中位数</li>
</ol>
<p>堆栈  小顶堆和大顶堆</p>
<p>小顶堆 A 保存较大的一半 长度为 $N/2$  N 为偶数  或者 $\frac{N+1}{2}$  N 为奇数</p>
<p>addNum()</p>
<p>m 和 n 为 A B 中元素的个数</p>
<ol>
<li>m = n 向 A 添加一个元素: 将 num 插入 B， 将B 堆顶元素插入A</li>
<li>m $\neq$ n： 向B添加一个元素 将新元素 num插入A 再将A堆顶元素插入B</li>
</ol>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> heapq <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">class</span> <span class="token class-name">MedianFinder</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>A <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment"># 小顶堆，保存较大的一半</span>
        self<span class="token punctuation">.</span>B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment"># 大顶堆，保存较小的一半</span>

    <span class="token keyword">def</span> <span class="token function">addNum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>A<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>B<span class="token punctuation">)</span><span class="token punctuation">:</span>
            heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span>A<span class="token punctuation">,</span> num<span class="token punctuation">)</span>
            heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span>B<span class="token punctuation">,</span> <span class="token operator">-</span>heappop<span class="token punctuation">(</span>self<span class="token punctuation">.</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span>B<span class="token punctuation">,</span> <span class="token operator">-</span>num<span class="token punctuation">)</span>
            heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span>A<span class="token punctuation">,</span> <span class="token operator">-</span>heappop<span class="token punctuation">(</span>self<span class="token punctuation">.</span>B<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">findMedian</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">float</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>A<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>A<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>A<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>B<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>heapq</code> 模块默认实现的是小顶堆，为了方便地使用大顶堆，可以通过在元素前取负值的方式来达到目的。</p>
<p>在小顶堆中，堆顶元素是最小的元素，而在大顶堆中，堆顶元素是最大的元素。通过取反操作，可以将原本最小的元素变为最大的元素，从而实现在 <code>heapq</code> 中模拟大顶堆的效果。</p>
<p>所以，这种技巧是为了绕过 <code>heapq</code> 模块默认是小顶堆的限制，以方便在算法中使用大顶堆。</p>
<ol>
<li>单词拆分</li>
</ol>
<p>给你一个字符串 <code>s</code> 和一个字符串列表 <code>wordDict</code> 作为字典。请你判断是否可以利用字典中出现的单词拼接出 <code>s</code> 。</p>
<p>动态规划：</p>
<p><img src="/2023/12/16/LeetCodeExamples/github\blog\source\_posts\image-20240101141407191.png" alt="image-20240101141407191"></p>
<pre class="line-numbers language-none"><code class="language-none">1.初始化 长度为len(s) + 1 的列表 s长度为0时返回ture
dp[i] 表示前i位是否可以用单词表示
2. 遍历所有字串 开始索引i从[0，n)：遍历
	结束索引为j 从[i +1, n+1):
	如果dp[i] &#x3D; True 且 s[i, ...j)在wordlist中：dp[j] &#x3D; True.
	(dp[i] &#x3D; True说明s的前i位可以用wordDictbiao&#39;s)
	<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>摩尔投票</li>
</ol>
<p>求大多数 假定一个数为结果几位+1， 其他数字记为-1 如果总和大于0 则这个数超过一半</p>
<ol>
<li>数组轮转</li>
</ol>
<p>方法1： 辅助空间 </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">rotate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        Do not return anything, modify nums in-place instead.
        """</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        k <span class="token operator">%=</span> n 
        tmp <span class="token operator">=</span> nums<span class="token punctuation">[</span>n<span class="token operator">-</span>k<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">-</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            nums<span class="token punctuation">[</span>i <span class="token operator">+</span> k<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
            nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>方法2： 双指针+翻转数组</p>
<p>先整体翻转</p>
<p>再反转[0, k-1] 和 [n-k, n-1]</p>
<p>方法3: 裴蜀定理优化</p>
<ul>
<li>核心思路： 每处理一个位置就跳转到k个位置之后的新位置</li>
<li>用pre变量保存上一个覆盖位置的值</li>
</ul>
<ol>
<li>H index</li>
</ol>
<p>二分法缩小遍历范围</p>
<p>计数<br>根据分析，利用最大的 h 不超过 nnn，我们可以再进一步，利用空间换时间，将复杂度降低到 O(n)O(n)O(n)。</p>
<p>假设我们预处理出引用次数所对应的论文数量 cnt，其中 cnt[a] = b 含义为引用次数 恰好 为 a 的论文数量有 b 篇。</p>
<p>那么再利用 h 是“最大”的满足定义的合法数，我们从 nnn 开始往前找，找到的第一个满足条件的数，即是答案。</p>
<p>具体的，创建 cnt 数组，对 cs 进行计数，由于最大 h 不超过 nnn，因此对于引用次数超过 nnn 的论文，可等价为引用次数为 nnn，即有计数逻辑 cnt[min(c, n)]++。</p>
<p>再根据处理好的 cnt，从 nnn 开始倒序找 h。</p>
<p>由于我们处理的 cnt[a] 含义为引用次数 恰好 为 a，但题目定义则是 至少。同时「至少出现 k+1k + 1k+1 次」的集合必然慢「至少出现 kkk 次」要求（子集关系），我们可以使用变量 tot，对处理过的 cnt[i] 进行累加，从而实现从 恰好 到 至少 的转换。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/11/18/RailsAdvanced/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/18/RailsAdvanced/" itemprop="url">RailsAdvanced</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-11-18T15:08:12+01:00">
                2023-11-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ruby-on-RailS/" itemprop="url" rel="index">
                    <span itemprop="name">Ruby on RailS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Questions for third room on Monday</p>
<p>GDPR </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/11/05/rubyOnRailsPart2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/05/rubyOnRailsPart2/" itemprop="url">ruby on Rails Part 2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-11-05T19:24:18+01:00">
                2023-11-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ruby-on-Rails/" itemprop="url" rel="index">
                    <span itemprop="name">Ruby on Rails</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Debugs-on-development-envieroment"><a href="#Debugs-on-development-envieroment" class="headerlink" title="Debugs on development envieroment"></a>Debugs on development envieroment</h3><p>when using development build, we can  use</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;%&#x3D; debug(params) if Rails.env.development? %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>in layout, it won’t be inserted into production applications or tests</p>
<p><strong>Box 7.1: Rails environments</strong></p>
<p>Rails comes equipped with three environments: <code>test</code>, <code>development</code>, and <code>production</code>. The default environment for the Rails console is <code>development</code>:</p>
<p><a href="chrome-extension://bfpfpfenkimhijpdcbbhmemcimbeehcl/OEBPS/Images/ch07_images.xhtml#f0318-04">Click here to view code image</a></p>
<pre class="line-numbers language-none"><code class="language-none">$ rails console
Loading development environment
&gt;&gt; Rails.env
&#x3D;&gt; &quot;development&quot;
&gt;&gt; Rails.env.development?
&#x3D;&gt; true
&gt;&gt; Rails.env.test?
&#x3D;&gt; false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>As you can see, Rails provides a <code>Rails</code> object with an <code>env</code> attribute and associated environment boolean methods, so that, for example, <code>Rails.env.test?</code> returns <code>true</code> in a test environment and <code>false</code> otherwise.</p>
<p>If you ever need to run a console in a different environment (to debug a test, for example), you can pass the environment as an option to the <code>console</code> script:</p>
<p><a href="chrome-extension://bfpfpfenkimhijpdcbbhmemcimbeehcl/OEBPS/Images/ch07_images.xhtml#f0319-01">Click here to view code image</a></p>
<pre class="line-numbers language-none"><code class="language-none">$ rails console --environment test
Loading test environment
&gt;&gt; Rails.env
&#x3D;&gt; &quot;test&quot;
&gt;&gt; Rails.env.test?
&#x3D;&gt; true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>As with the console, <code>development</code> is the default environment for the Rails server, but you can also run it in a different environment:</p>
<p><a href="chrome-extension://bfpfpfenkimhijpdcbbhmemcimbeehcl/OEBPS/Images/ch07_images.xhtml#f0319-02">Click here to view code image</a></p>
<pre class="line-numbers language-none"><code class="language-none">$ rails server --environment production<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>If you view your app running in production, it won’t work without a production database, which we can create by running <code>rails db:migrate</code> in production:</p>
<p><a href="chrome-extension://bfpfpfenkimhijpdcbbhmemcimbeehcl/OEBPS/Images/ch07_images.xhtml#f0319-03">Click here to view code image</a></p>
<pre class="line-numbers language-none"><code class="language-none">$ rails db:migrate RAILS_ENV&#x3D;production<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>By the way, if you have deployed your sample app to Heroku, you can see its environment using <code>heroku run rails console:</code></p>
<p><a href="chrome-extension://bfpfpfenkimhijpdcbbhmemcimbeehcl/OEBPS/Images/ch07_images.xhtml#f0319-04">Click here to view code image</a></p>
<pre class="line-numbers language-none"><code class="language-none">$ heroku run rails console
&gt;&gt; Rails.env
&#x3D;&gt; &quot;production&quot;
&gt;&gt; Rails.env.production?
&#x3D;&gt; true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Naturally, since Heroku is a platform for production sites, it runs each application in a production environment.</p>
<hr>
<h4 id="Consequence-of-variable-in-controller-and-view"><a href="#Consequence-of-variable-in-controller-and-view" class="headerlink" title="Consequence of variable in controller and view"></a>Consequence of variable in controller and view</h4><p>For example we want to present user information, in the view we can use  <code>@user.param</code></p>
<p>then we need to define <code>@user</code> variable in corresponding view controller (e.g. <code>show</code>), and also we can use <code>find</code> function the select the data</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token operator">&lt;</span><span class="token operator">%</span> provide<span class="token punctuation">(</span><span class="token symbol">:title</span><span class="token punctuation">,</span> <span class="token variable">@user</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token string-literal"><span class="token string">%>
&lt;h1></span></span>
  <span class="token operator">&lt;</span><span class="token operator">%=</span> gravatar_for <span class="token variable">@user</span> <span class="token string-literal"><span class="token string">%>
  &lt;%= @user.name %></span></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    
<span class="token keyword">class</span> <span class="token class-name">UsersController</span> <span class="token operator">&lt;</span> ApplicationController

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">show</span></span>
    <span class="token variable">@user</span> <span class="token operator">=</span> User<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># debug options to show Ruby debugger prompt</span>
    debugger
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">new</span></span>
      <span class="token variable">@user</span> <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>user_params<span class="token punctuation">)</span>    
    <span class="token keyword">if</span> <span class="token variable">@user</span><span class="token punctuation">.</span>save
      flash<span class="token punctuation">[</span><span class="token symbol">:success</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Welcome to the Sample App!"</span></span>
      redirect_to <span class="token variable">@user</span>
    <span class="token keyword">else</span>
      render <span class="token string-literal"><span class="token string">'new'</span></span><span class="token punctuation">,</span> <span class="token symbol">status</span><span class="token operator">:</span> <span class="token symbol">:unprocessable_entity</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">private</span>

    <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">user_params</span></span>
      params<span class="token punctuation">.</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token symbol">:user</span><span class="token punctuation">)</span><span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:email</span><span class="token punctuation">,</span> <span class="token symbol">:password</span><span class="token punctuation">,</span>
                                   <span class="token symbol">:password_confirmation</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token comment">#use strong parameter</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>avatar
<span class="token keyword">module</span> <span class="token class-name">UsersHelper</span>

  <span class="token comment"># Returns the Gravatar for the given user.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">gravatar_for</span></span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
    gravatar_id  <span class="token operator">=</span> Digest<span class="token double-colon punctuation">::</span><span class="token constant">MD5</span><span class="token double-colon punctuation">::</span>hexdigest<span class="token punctuation">(</span>user<span class="token punctuation">.</span>email<span class="token punctuation">.</span>downcase<span class="token punctuation">)</span>
    gravatar_url <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"https://secure.gravatar.com/avatar/</span><span class="token interpolation"><span class="token delimiter punctuation">#&#123;</span><span class="token content">gravatar_id</span><span class="token delimiter punctuation">&#125;</span></span><span class="token string">"</span></span>
    image_tag<span class="token punctuation">(</span>gravatar_url<span class="token punctuation">,</span> <span class="token symbol">alt</span><span class="token operator">:</span> user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token symbol">class</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"gravatar"</span></span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> sign up form format
<span class="token operator">&lt;</span><span class="token operator">%</span> provide<span class="token punctuation">(</span><span class="token symbol">:title</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'Sign up'</span></span><span class="token punctuation">)</span> <span class="token string-literal"><span class="token string">%>
&lt;h1></span></span>Sign up<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>

<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">"row"</span></span><span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">"col-md-6 col-md-offset-3"</span></span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">%=</span> form_with<span class="token punctuation">(</span><span class="token symbol">model</span><span class="token operator">:</span> <span class="token variable">@user</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>f<span class="token operator">|</span> <span class="token string-literal"><span class="token string">%>
	&lt;%= render 'shared/error_messages', object: f.object %></span></span>
<span class="token operator">/</span><span class="token operator">/</span> html format
<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">"user_name"</span></span><span class="token operator">></span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string-literal"><span class="token string">"user_name"</span></span> name<span class="token operator">=</span><span class="token string-literal"><span class="token string">"user[name]"</span></span> type<span class="token operator">=</span><span class="token string-literal"><span class="token string">"text"</span></span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>label <span class="token symbol">:name</span> <span class="token string-literal"><span class="token string">%>
      &lt;%= f.text_field :name %></span></span>

      <span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>label <span class="token symbol">:email</span> <span class="token string-literal"><span class="token string">%>
      &lt;%= f.email_field :email %></span></span>

      <span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>label <span class="token symbol">:password</span> <span class="token string-literal"><span class="token string">%>
      &lt;%= f.password_field :password %></span></span>

      <span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>label <span class="token symbol">:password_confirmation</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Confirmation"</span></span> <span class="token string-literal"><span class="token string">%>
      &lt;%= f.password_field :password_confirmation %></span></span>

      <span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>submit <span class="token string-literal"><span class="token string">"Create my account"</span></span><span class="token punctuation">,</span> <span class="token symbol">class</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"btn btn-primary"</span></span> <span class="token string-literal"><span class="token string">%>
    &lt;% end %></span></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Strong-parameter"><a href="#Strong-parameter" class="headerlink" title="Strong parameter"></a>Strong parameter</h3><p>In the present instance, we want to require the <strong><code>params</code></strong> hash to have a <strong><code>:user</code></strong> attribute, and we want to permit the name, email, password, and password confirmation attributes</p>
<pre class="line-numbers language-none"><code class="language-none">params.require(:user).permit(:name, :email, :password, :password_confirmation)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>to show the error message we can create a folder shared/error_messages</p>
<p>&lt;%= render ‘shared/error_messages’, object: f.object %&gt;</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token variable">@user</span><span class="token punctuation">.</span>errors<span class="token punctuation">.</span>any<span class="token operator">?</span> <span class="token string-literal"><span class="token string">%>
  &lt;div id="error_explanation"></span></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">"alert alert-danger"</span></span><span class="token operator">></span>
      The form contains <span class="token operator">&lt;</span><span class="token operator">%=</span> pluralize<span class="token punctuation">(</span><span class="token variable">@user</span><span class="token punctuation">.</span>errors<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"error"</span></span><span class="token punctuation">)</span> <span class="token string-literal"><span class="token string">%>.
    &lt;/div></span></span>
    <span class="token operator">&lt;</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token variable">@user</span><span class="token punctuation">.</span>errors<span class="token punctuation">.</span>full_messages<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>msg<span class="token operator">|</span> <span class="token string-literal"><span class="token string">%>
      &lt;li></span></span><span class="token operator">&lt;</span><span class="token operator">%=</span> msg <span class="token string-literal"><span class="token string">%>&lt;/li></span></span>
    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">end</span> <span class="token string-literal"><span class="token string">%>
    &lt;/ul></span></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">end</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>count return number of errors. any? empty? is one of a pair of complementary methods</p>
<pre class="line-numbers language-none"><code class="language-none">&gt;&gt; user.errors.empty?
&#x3D;&gt; false
&gt;&gt; user.errors.any?
&#x3D;&gt; true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>The other new idea is the <strong><code>pluralize</code></strong> text helper, which is available in the console via the <strong><code>helper</code></strong> object</p>
<pre class="line-numbers language-none"><code class="language-none">&gt;&gt; helper.pluralize(1, &quot;error&quot;)
&#x3D;&gt; &quot;1 error&quot;
&gt;&gt; helper.pluralize(5, &quot;error&quot;)
&#x3D;&gt; &quot;5 errors&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>flash</code> method is to display the assigned message on the first page after the redirect</p>
<h4 id="Login"><a href="#Login" class="headerlink" title="Login"></a>Login</h4><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">SessionsController</span> <span class="token operator">&lt;</span> ApplicationController

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">new</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>
    user <span class="token operator">=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">email</span><span class="token operator">:</span> params<span class="token punctuation">[</span><span class="token symbol">:session</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token symbol">:email</span><span class="token punctuation">]</span><span class="token punctuation">.</span>downcase<span class="token punctuation">)</span>
    <span class="token keyword">if</span> user <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:session</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token symbol">:password</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      reset_session
      log_in user
      redirect_to user
    <span class="token keyword">else</span>
      flash<span class="token punctuation">.</span>now<span class="token punctuation">[</span><span class="token symbol">:danger</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Invalid email/password combination'</span></span>
      render <span class="token string-literal"><span class="token string">'new'</span></span><span class="token punctuation">,</span> <span class="token symbol">status</span><span class="token operator">:</span> <span class="token symbol">:unprocessable_entity</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">destroy</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong><code>:unprocessable_entity</code></strong> status code is necessary when using turbo</p>
<p>This means that</p>
<pre class="line-numbers language-none"><code class="language-none">params[:session]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>is itself a hash:</p>
<pre class="line-numbers language-none"><code class="language-none">&#123; password: &quot;foobar&quot;, email: &quot;user@example.com&quot; &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>As a result,</p>
<pre class="line-numbers language-none"><code class="language-none">params[:session][:email]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>is the submitted email address and</p>
<pre class="line-numbers language-none"><code class="language-none">params[:session][:password]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Then we need to include SessionHelper in the ApplicationController</p>
<p>To deal with <strong><em>session fixation</em></strong>. The solution is to reset the session immediately before logging in so that the attacker’s desired id gets cleared and a freshly created id ends up in the session hash, which we can do with the built-in Rails method <strong><code>reset_session</code></strong>:</p>
<p>@ represents an instance variable: an instance of the model (redirect_to @user)</p>
<p>while normal name represent a variable (redirect_to user)</p>
<h5 id="Session-Helper"><a href="#Session-Helper" class="headerlink" title="Session Helper"></a>Session Helper</h5><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">module</span> <span class="token class-name">SessionsHelper</span>

  <span class="token comment"># Logs in the given user.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">log_in</span></span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
    session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span> <span class="token operator">=</span> user<span class="token punctuation">.</span>id
  <span class="token keyword">end</span>

  <span class="token comment"># Returns the current logged-in user (if any).</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">current_user</span></span>
    <span class="token keyword">if</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span>
        <span class="token operator">/</span><span class="token operator">/</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">id</span><span class="token operator">:</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token variable">@current_user</span> is <span class="token keyword">nil</span>
      <span class="token variable">@current_user</span> <span class="token operator">||=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">id</span><span class="token operator">:</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li><strong>Turbo Streams</strong>: Turbo Streams is a feature of Turbo that allows you to send updates to the client, typically in response to some action, without a full page reload. It works by sending a stream of Turbo Frames, which are partial HTML responses, to the client.</li>
<li><strong>turbo:load Event</strong>: The <code>turbo:load</code> event is triggered by Turbo when a new page is loaded or when a Turbo Frame is inserted into the DOM. It’s an event you can listen to in your JavaScript code to perform actions after the page or Turbo Frame has loaded.</li>
</ol>
<p><strong>Security</strong></p>
<p>we can digest the password for the user model class we can add</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">digest</span></span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>
    cost <span class="token operator">=</span> ActiveModel<span class="token double-colon punctuation">::</span>SecurePassword<span class="token punctuation">.</span>min_cost <span class="token operator">?</span> BCrypt<span class="token double-colon punctuation">::</span>Engine<span class="token double-colon punctuation">::</span><span class="token constant">MIN_COST</span> <span class="token operator">:</span>
                                                  BCrypt<span class="token double-colon punctuation">::</span>Engine<span class="token punctuation">.</span>cost
    BCrypt<span class="token double-colon punctuation">::</span>Password<span class="token punctuation">.</span>create<span class="token punctuation">(</span>string<span class="token punctuation">,</span> <span class="token symbol">cost</span><span class="token operator">:</span> cost<span class="token punctuation">)</span>
  <span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p> It uses the minimum cost parameter in tests and a normal (high) cost parameter in production. </p>
<p>To guard against the session-fixation attacks, we’ll also add a call to <strong><code>reset_session</code></strong> immediately before logging in . </p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>
    <span class="token variable">@user</span> <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>user_params<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token variable">@user</span><span class="token punctuation">.</span>save
      reset_session
      log_in <span class="token variable">@user</span>
      flash<span class="token punctuation">[</span><span class="token symbol">:success</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Welcome to the Sample App!"</span></span>
      redirect_to <span class="token variable">@user</span>
    <span class="token keyword">else</span>
      render <span class="token string-literal"><span class="token string">'new'</span></span><span class="token punctuation">,</span> <span class="token symbol">status</span><span class="token operator">:</span> <span class="token symbol">:unprocessable_entity</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">destroy</span></span>
    log_out
    redirect_to root_url<span class="token punctuation">,</span> <span class="token symbol">status</span><span class="token operator">:</span> <span class="token symbol">:see_other</span>
  <span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> log out 
<span class="token keyword">module</span> <span class="token class-name">SessionsHelper</span>

  <span class="token comment"># Logs in the given user.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">log_in</span></span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
    session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span> <span class="token operator">=</span> user<span class="token punctuation">.</span>id
  <span class="token keyword">end</span>
  <span class="token punctuation">.</span>
  <span class="token punctuation">.</span>
  <span class="token punctuation">.</span>
  <span class="token comment"># Logs out the current user.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">log_out</span></span>
    reset_session
    <span class="token variable">@current_user</span> <span class="token operator">=</span> <span class="token keyword">nil</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Remember-Token-and-Digest"><a href="#Remember-Token-and-Digest" class="headerlink" title="Remember Token and Digest"></a>Remember Token and Digest</h4><pre class="line-numbers language-none"><code class="language-none">$ rails console
&gt;&gt; SecureRandom.urlsafe_base64
&#x3D;&gt; &quot;brl_446-8bqHv87AQzUj_Q&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>urlsafe<em>base64 returns a random string of length 22 composed of the characters A–Z, a–z, 0–9, “-”, and “</em>” </p>
<p>So under the User.digest(string) function we define new function for new_token and to remember it</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment">#create an accessible attribute</span>
attr_accessor <span class="token symbol">:remember_token</span>
<span class="token comment"># Returns a random token.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">new_token</span></span>
    SecureRandom<span class="token punctuation">.</span>urlsafe_base64
  <span class="token keyword">end</span>

  <span class="token comment"># Remembers a user in the database for use in persistent sessions.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">remember</span></span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>remember_token <span class="token operator">=</span> User<span class="token punctuation">.</span>new_token
    update_attribute<span class="token punctuation">(</span><span class="token symbol">:remember_digest</span><span class="token punctuation">,</span> User<span class="token punctuation">.</span>digest<span class="token punctuation">(</span>remember_token<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>we now create a persistent session by storing a user’s (encrypted) id and remember token as permanent cookies on the browser. The way to do this is with the <strong><code>cookies</code></strong> method, which (as with <strong><code>session</code></strong>) we can treat as a hash.</p>
<p>For token expiration date we can use <strong><code>permanent</code></strong>  for </p>
<pre class="line-numbers language-none"><code class="language-none">cookies.permanent[:remember_token] &#x3D; remember_token
--------
cookies[:remember_token] &#x3D; &#123; value:   remember_token,
                             expires: 20.years.from_now.utc &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>This causes Rails to set the expiration to <strong><code>20.years.from_now</code></strong> automatically</p>
<p>the <code>remember_token</code> is the plain, unhashed token, while the <code>remember_digest</code> is the hashed version stored in the database. </p>
<p>So we  can use the function </p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># Returns true if the given token matches the digest.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">authenticated</span></span><span class="token operator">?</span><span class="token punctuation">(</span>remember_token<span class="token punctuation">)</span>
    BCrypt<span class="token double-colon punctuation">::</span><span class="token class-name">Password</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>remember_digest<span class="token punctuation">)</span><span class="token punctuation">.</span>is_password<span class="token operator">?</span><span class="token punctuation">(</span>remember_token<span class="token punctuation">)</span>
  <span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Instead of <strong><code>==</code></strong>, this uses the boolean method <strong><code>is_password?</code></strong> to perform the comparison. Because its meaning is a little clearer, we’ll prefer this second comparison form in the application code.</p>
<p>And we will add a remember user for the function create, with log_in, we define the function calls user.remember in session helper</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>model
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>
  user <span class="token operator">=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">email</span><span class="token operator">:</span> params<span class="token punctuation">[</span><span class="token symbol">:session</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token symbol">:email</span><span class="token punctuation">]</span><span class="token punctuation">.</span>downcase<span class="token punctuation">)</span>
  <span class="token keyword">if</span> user <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:session</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token symbol">:password</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    reset_session
    remember user
    log_in user
    redirect_to user
  <span class="token keyword">else</span>
    flash<span class="token punctuation">.</span>now<span class="token punctuation">[</span><span class="token symbol">:danger</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Invalid email/password combination'</span></span>
    render <span class="token string-literal"><span class="token string">'new'</span></span><span class="token punctuation">,</span> <span class="token symbol">status</span><span class="token operator">:</span> <span class="token symbol">:unprocessable_entity</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> helper
<span class="token comment"># Remembers a user in a persistent session.</span>
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">remember</span></span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
  user<span class="token punctuation">.</span>remember
  cookies<span class="token punctuation">.</span>permanent<span class="token punctuation">.</span>encrypted<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span> <span class="token operator">=</span> user<span class="token punctuation">.</span>id
  cookies<span class="token punctuation">.</span>permanent<span class="token punctuation">[</span><span class="token symbol">:remember_token</span><span class="token punctuation">]</span> <span class="token operator">=</span> user<span class="token punctuation">.</span>remember_token
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>||= means if the variable is already set, then it will not be override</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">if</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span>
  <span class="token variable">@current_user</span> <span class="token operator">||=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">id</span><span class="token operator">:</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">elsif</span> cookies<span class="token punctuation">.</span>encrypted<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span>
  user <span class="token operator">=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">id</span><span class="token operator">:</span> cookies<span class="token punctuation">.</span>encrypted<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> user <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>authenticated<span class="token operator">?</span><span class="token punctuation">(</span>cookies<span class="token punctuation">[</span><span class="token symbol">:remember_token</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    log_in user
    <span class="token variable">@current_user</span> <span class="token operator">=</span> user
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> eliminate ver
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_id <span class="token operator">=</span> session<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token variable">@current_user</span> <span class="token operator">||=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">id</span><span class="token operator">:</span> user_id<span class="token punctuation">)</span>
<span class="token keyword">elsif</span> <span class="token punctuation">(</span>user_id <span class="token operator">=</span> cookies<span class="token punctuation">.</span>encrypted<span class="token punctuation">[</span><span class="token symbol">:user_id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>if there is user id in session then we find it if we don’t have a current user, else we try to find if there is user in cookies</p>
<p>this is <em>not</em> a comparison (which would use double-equals <strong><code>==</code></strong>), but rather is an <em>assignment</em></p>
<h4 id="Remember-me-CheckBox"><a href="#Remember-me-CheckBox" class="headerlink" title="Remember me CheckBox"></a>Remember me CheckBox</h4><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>label <span class="token symbol">:remember_me</span><span class="token punctuation">,</span> <span class="token symbol">class</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"checkbox inline"</span></span> <span class="token keyword">do</span> <span class="token string-literal"><span class="token string">%>
        &lt;%= f.check_box :remember_me %></span></span>
        <span class="token operator">&lt;</span>span<span class="token operator">></span>Remember me on this computer<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">end</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>How does rails know if a record is a new one?</p>
<pre class="line-numbers language-none"><code class="language-none">$ rails console
&gt;&gt; User.new.new_record?
&#x3D;&gt; true
&gt;&gt; User.first.new_record?
&#x3D;&gt; false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>use new_record?</p>
<p><strong>patch</strong> is used for making partial updates to existing resources.</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">test <span class="token string-literal"><span class="token string">"should redirect update when logged in as wrong user"</span></span> <span class="token keyword">do</span>
    log_in_as<span class="token punctuation">(</span><span class="token variable">@other_user</span><span class="token punctuation">)</span>
    patch user_path<span class="token punctuation">(</span><span class="token variable">@user</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token symbol">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token symbol">user</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token symbol">name</span><span class="token operator">:</span> <span class="token variable">@user</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>
                                              <span class="token symbol">email</span><span class="token operator">:</span> <span class="token variable">@user</span><span class="token punctuation">.</span>email <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span>
    assert flash<span class="token punctuation">.</span>empty<span class="token operator">?</span>
    assert_redirected_to root_url
  <span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">before_action <span class="token symbol">:logged_in_user</span><span class="token punctuation">,</span> <span class="token symbol">only</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token symbol">:edit</span><span class="token punctuation">,</span> <span class="token symbol">:update</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li><strong><code>before_action</code></strong>: This is a Rails method that defines a filter to be run before the specified controller actions.</li>
<li><strong><code>:logged_in_user</code></strong>: This is the name of the method that will be called before the specified actions. In this case, it’s a method checks if a user is logged in.</li>
<li><strong><code>only: [:edit, :update]</code></strong>: This option specifies that the <code>logged_in_user</code> method should only be executed before the <code>:edit</code> and <code>:update</code> actions in the controller. It restricts the filter’s application to specific actions.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/ReactHookReview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/10/22/ReactHookReview/" itemprop="url">React Review</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-10-22T17:15:58+02:00">
                2023-10-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software-study/" itemprop="url" rel="index">
                    <span itemprop="name">Software study</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>This blog aims to review the react Hooks or some other tricks for preparation with full-stack intern.</p>
<h3 id="1-useState"><a href="#1-useState" class="headerlink" title="1. useState"></a>1. useState</h3><ul>
<li>Used inside function component not class</li>
<li>Every time runs, execute in the same order</li>
</ul>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">const [count, setCount (funtion to update first(current state))] &#x3D; useState(4)

&#x2F;&#x2F; set 
function decrementCount() &#123;
    setCount(prevCount &#x3D;&gt; prevCount - 1)
&#125;

&lt;button conclick &#x3D; &#123;decrementCount&#125;&gt; - &lt;&#x2F;button&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2 ways passing the state ( direct / function )</p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">useState(() &#x3D; &gt; CountInitial())

const CountInitial() &#123;
    return 4
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Function only runs once -&gt; good for performance</p>
<p>Update the parameter we want：</p>
<pre class="line-numbers language-none"><code class="language-none">function decrememtCount() &#123;
setState(prevState &#x3D;&gt; &#123;
return &#123;...prevState, count: prevState.count + 1&#125;
&#125;)
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Advantage, make multiple state to split them </p>
<h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p>side effect for state changes</p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">
const [resourceType, func ] &#x3D; useState(...)
useEffect(() &#x3D;&gt; &#123;
	code
&#125;, [resourceType]) &#x2F;&#x2F; run the code when parameter changes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">export default function App() &#123;
    const[windowWidth, setwindoWidth] &#x3D; useState(window.innerWidth)
    const handleResize &#x3D; () &#x3D;&gt; &#123;
        setwindowWidth(window.innerWidth)
    &#125;
    
    useEffect(() &#x3D;&gt; &#123;
        window.addEvenListener(&#39;resize&#39;, handleResize)
        
    &#125;, [])
    return (
    	&lt;div&gt;&#123;windowWidth&#125;&lt;&#x2F;div&gt;
    )
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-useMemo"><a href="#3-useMemo" class="headerlink" title="3. useMemo"></a>3. useMemo</h3><p>Momo: memoization</p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">const number &#x3D; useMemo(() &#x3D;&gt; slowFunction(para), [number])

function slowFunction(para) &#123;
    
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>or we can use useMemo for invoking useEffect when the value changes</p>
<h3 id="4-useRef"><a href="#4-useRef" class="headerlink" title="4. useRef"></a>4. useRef</h3><p>similar to state</p>
<p>not cause re-update when changes  Separate from render cycle</p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">const renderCount &#x3D; useRef(0)
&#x2F;&#x2F;&#123; current: 0 &#125;
useEffect(()&#x3D;&gt; &#123;
    renderCount.current &#x3D; renderCount.current +1
&#125;)

--------------------------------------------------------
&#x2F;&#x2F; common usage 
inputRef &#x3D; useRef()

function focus() &#123;
    inputRef.current.focus()
    &#x2F;&#x2F;inputRef.current.value &#x3D; &#39;Some value&#39;
&#125;

return (
	&lt;&gt;
    	&lt;input ref&#x3D;&#123;inputRef&#125; value&#x3D;&#123;name&#125; onChange&#123;e &#x3D;&gt; setName(e.target.value)&#125;&#x2F;&gt;
        &lt;div&gt;&lt;&#x2F;div&gt;
    &lt;&#x2F;&gt;
)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li><h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3></li>
</ol>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">&#x2F;&#x2F; create context
export const ThemeContext &#x3D; React.createContext()

export default function App() &#123;
    const [darkTheme, setDarkTheme] &#x3D; useState(true)
    
    function toggleTheme()&#123;
        setDarkTheme(prevDrakTheme &#x3D;&gt; !prevDarkTheme)
    &#125;
    
    return
    &lt;&gt;
    	&lt;ThemeContext.Provider value&#x3D;&#123;darkTheme&#125;&gt;	
    		&lt;button onclick&#x3D;&#123;toggleTheme&#125;&gt;Toggle Theme&lt;&#x2F;button&gt;
        	&lt;FunctionContextComponent&#x2F;&gt;
        	&lt;ClassContextComponent&#x2F;&gt;
    	&lt;&#x2F;ThemeContext.Provider&gt;
    &lt;&#x2F;&gt;
&#125;

--------------------------------
ClassContextComponent.js 

import &#123;ThemeContext&#125; from &#39;.&#x2F;App&#39;

render() &#123;
    return (
    	&lt;ThemeContext.Consumer&gt;
        	&#123;darkTheme &#x3D;&gt; &#123;
                return &lt;div style &#x3D; &#123;this.themStyles(darkTheme)&#125;&gt;Class 					Theme&lt;&#x2F;div&gt;
            &#125;&#125;
        &lt;&#x2F;ThemeContext.Consumer&gt;
    )
&#125;

-------------------------------------------------
FunctionContextComponent.js
import React, &#123;useContext&#125; from &#39;react&#39;
import &#123;ThemeContext&#125; from &#39;.&#x2F;App&#39;

export default function FunctionContextComponent()&#123;
    const darkTheme &#x3D; useContext(ThemeContext)
    const themeStyles &#x3D; &#123;
        color: darkTheme ? &#39;#CCC&#39; : &#39;#333&#39;
    &#125;
    return (
    	&lt;div style&#x3D;&#123;themeStyles&#125;&gt;Function Theme&lt;&#x2F;div&gt;
    )
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context is broke into two sections </p>
<ul>
<li>Context.provider: Wrap all the code need to access in the provider. All the child components have access to the <code>value</code> prop (Context is for passing dawn value without manual process)</li>
</ul>
<p>Function get rid of the nesting </p>
<p><img src="https://i.imgur.com/Kumc8N5.png" alt="image-20231025013452430"></p>
<p>Then we can use custom hook for use the themeContext</p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">export function useTheme() &#123;
	return useContext(ThemeContext)
&#125;
export function useThemeUpdate() &#123;
	return useContext(ThemeUpdateContext)
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="UseReducer"><a href="#UseReducer" class="headerlink" title="UseReducer"></a>UseReducer</h3><p>start with two params</p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">type Actions &#x3D; 
    | &#123;type: &quot;add&quot;; payload: string&#125;
	| &#123;type： &quot;remove&quot;; payload: numb&#125;

function reducer(state, action) &#123;
    
&#125;


const [state, disapatch] &#x3D; useReducer(reducer, &#123;count :0&#125;) &#x2F;&#x2F; object
const [count, setCount] &#x3D; useState(0)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>call dispatch to update the state</p>
<p>we can dispatch a type to dispatch, like</p>
<h4 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h4><p>npm install axios</p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">const api &#x3D; axios.create (&#123;
	baseURL: &#39;url example&#39;,
    headers: &#123;
        &#39;X-auth-key&#39;: &quot;&quot;
    &#125;
&#125;)

class App extends Component &#123;
    state &#x3D; &#123;
        courses:[]
    &#125;
    
	constructor() &#123;
		super();
        this.getcourses();
	&#125;
    
    getCourses &#x3D; async () &#x3D;&gt; &#123;
        let data &#x3D; await api.get(&#39;&#x2F;&#39;, &#123;
            params: &#123;
                _limit: 3
                _start: 0
            &#125;
        &#125;).then((&#123;data&#125;) &#x3D;&gt; data);
		&#125;)
        this.setState(&#123; courses: data&#125;)
    &#125;
    
    getCourses2 &#x3D; async () &#x3D;&gt; &#123;
        try &#123;
        	let data &#x3D; await axios(&#123;
                method: &#39;get&#39;,
                url: &#39;xxxxxxx&#39;
            &#125;);
			&#125;).then((&#123;data&#125;) &#x3D;&gt; data)
            this.setState(&#123; courses: data&#125;)
    	&#125;
    &#125;
    
    
    createCourse &#x3D; async() &#x3D; &gt; &#123;
        let res &#x3D; await api.post(&#39;&#x2F;&#39;, &#123; title: &quot;a&quot;, id：4； author : &#39;test&#39;&#125;)
    &#125;
    
    deleteCourse &#x3D; async (id) &#x3D;&gt; &#123;
        let data &#x3D; awai api.delete(&#96;&#x2F;$&#123;id&#125;&#96;)
        this.getCourses();
    &#125;
    
    updateCourse &#x3D; async (id, val) &#x3D;&gt; &#123;
        let data &#x3D; await api.patch(&#96;&#x2F;$&#123;id&#125;&#96;, &#123;title: val&#125;)
        this.getCourses();
    &#125;
    render() &#123;
        return (
        	&lt;div&gt;
            	&#123;this.state.courses.map(course &#x3D;&gt;
                      &lt;h2 key&#x3D;&#123;course.id&#125;&gt;&#123;course.title&#125;&lt;&#x2F;h2&gt;
                                       )&#125;
            &lt;&#x2F;div&gt;
        )
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h4><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> role<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// object</span>
<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token comment">// ? for optional</span>
    age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> lotsOfPeople<span class="token operator">:</span> Person<span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">// union</span>
<span class="token keyword">let</span> age：<span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">printName</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// => for return type</span>
<span class="token class-name"><span class="token keyword">let</span></span> <span class="token function-variable function">function</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">never</span><span class="token punctuation">;</span>

<span class="token comment">// alias: type and interface</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">X</span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">Y</span></span> <span class="token operator">=</span> <span class="token constant">X</span> <span class="token operator">&amp;</span> <span class="token punctuation">&#123;</span>
    c<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> y<span class="token operator">:</span> <span class="token constant">Y</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    c<span class="token operator">:</span> <span class="token string">"aaa00"</span><span class="token punctuation">;</span>
    d<span class="token operator">:</span> <span class="token number">42</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//interface Person &#123;</span>
<span class="token comment">//    name: string;</span>
<span class="token comment">//    age?: number;</span>
<span class="token comment">//&#125;</span>

<span class="token keyword">interface</span> <span class="token class-name">Guy</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>
    profession<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">name</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span>
    profession<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">X</span></span><span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/14/RubyBasic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/10/14/RubyBasic/" itemprop="url">RubyBasic</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-10-14T13:00:16+02:00">
                2023-10-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ruby-on-Rails/" itemprop="url" rel="index">
                    <span itemprop="name">Ruby on Rails</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Ruby-on-Rails"><a href="#Ruby-on-Rails" class="headerlink" title="Ruby on Rails"></a>Ruby on Rails</h2><p>File directory example:</p>
<p><img src="https://i.imgur.com/bgUWKix.png" alt="image-20231014130434451"></p>
<h2 id="app-assets"><a href="#app-assets" class="headerlink" title="app - assets"></a><strong>app</strong> - assets</h2><p>folder for css, images…</p>
<p>models - part  of mvc model</p>
<h2 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h2><p>hardly modify</p>
<p>routes.rb — routes</p>
<hr>
<p>rails routes -&gt; all the routes</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">Rails<span class="token punctuation">.</span>application<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>
  <span class="token comment"># get 'home/index'</span>
  root <span class="token string-literal"><span class="token string">'home#index'</span></span> <span class="token comment"># root page</span>
  <span class="token comment"># Define your application routes per the DSL in https://guides.rubyonrails.org/routing.html</span>

  <span class="token comment"># Defines the root path route ("/")</span>
  <span class="token comment"># root "articles#index"</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="db"><a href="#db" class="headerlink" title="db"></a>db</h2><p>modes </p>
<p>….</p>
<h2 id="Gem"><a href="#Gem" class="headerlink" title="Gem"></a>Gem</h2><p>important</p>
<h2 id="Create-a-controller"><a href="#Create-a-controller" class="headerlink" title="Create a controller"></a>Create a controller</h2><p>rails g controller [name (e.g. home -&gt; home_controller)] [page]</p>
<h2 id="Navbar"><a href="#Navbar" class="headerlink" title="Navbar"></a>Navbar</h2><p>bootstrap 5.3 new dark nave bar <code>data-bs-theme=&quot;dark&quot;</code></p>
<h2 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h2><p>rails g scaffold + [name]</p>
<p><img src="https://i.imgur.com/kq6y8Y2.png" alt="image-20231015155849915"></p>
<p>It will generate a model for u</p>
<h2 id="Simple-Deployment"><a href="#Simple-Deployment" class="headerlink" title="Simple Deployment"></a>Simple Deployment</h2><p>Both tutorial and project are using Heroku for deploying ruby application</p>
<p>It’s using PostgreSQL</p>
<p>example gemfile</p>
<pre class="line-numbers language-none"><code class="language-none">source &quot;https:&#x2F;&#x2F;rubygems.org&quot;
git_source(:github) &#123; |repo| &quot;https:&#x2F;&#x2F;github.com&#x2F;#&#123;repo&#125;.git&quot; &#125;

ruby &quot;3.1.2&quot;

gem &quot;rails&quot;,           &quot;7.0.4&quot;
gem &quot;sprockets-rails&quot;, &quot;3.4.2&quot;
gem &quot;importmap-rails&quot;, &quot;1.1.0&quot;
gem &quot;turbo-rails&quot;,     &quot;1.1.1&quot;
gem &quot;stimulus-rails&quot;,  &quot;1.0.4&quot;
gem &quot;jbuilder&quot;,        &quot;2.11.5&quot;
gem &quot;puma&quot;,            &quot;5.6.4&quot;
gem &quot;bootsnap&quot;,        &quot;1.12.0&quot;, require: false

group :development, :test do
  gem &quot;sqlite3&quot;, &quot;1.4.2&quot;
  gem &quot;debug&quot;,   &quot;1.5.0&quot;, platforms: %i[ mri mingw x64_mingw ]
end

group :development do
  gem &quot;web-console&quot;, &quot;4.2.0&quot;
end

group :test do
  gem &quot;capybara&quot;,           &quot;3.37.1&quot;
  gem &quot;selenium-webdriver&quot;, &quot;4.2.0&quot;
  gem &quot;webdrivers&quot;,         &quot;5.0.0&quot;
end

group :production do
  gem &quot;pg&quot;, &quot;1.3.5&quot;
end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>heroku login  -&gt; create </p>
<p>Then push the main branch to heroku</p>
<p>git push heroku main</p>
<p>heroku apps:info</p>
<p>small trick for domain address: (‘a’ .. ‘z’).to_a.shuffle[0..7].join</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">rails generate scaffold User name<span class="token symbol">:string</span> email<span class="token symbol">:string</span>
rails db<span class="token symbol">:migrate</span>
<span class="token keyword">for</span> looping usage<span class="token operator">:</span>
    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token variable">@users</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>user<span class="token operator">|</span> <span class="token string-literal"><span class="token string">%>
		
	&lt;% end %></span></span>
        
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>models
       one to many
	<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token operator">&lt;</span> ApplicationRecord
        has_many <span class="token operator">:</span> microposts
    <span class="token keyword">end</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
   <span class="token keyword">class</span> <span class="token class-name">Micropost</span> <span class="token operator">&lt;</span> ApplicationRecord
       belongs_to <span class="token operator">:</span> user
       <span class="token symbol">validates</span><span class="token operator">:</span> content<span class="token punctuation">,</span> <span class="token symbol">length</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token symbol">maximum</span><span class="token operator">:</span> <span class="token number">140</span><span class="token punctuation">&#125;</span>
   <span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Test-in-rails"><a href="#Test-in-rails" class="headerlink" title="Test in rails"></a>Test in rails</h3><p>Also generated by rails generate</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">"test_helper"</span></span>

<span class="token keyword">class</span> <span class="token class-name">StaticPagesControllerTest</span> <span class="token operator">&lt;</span> ActionDispatch<span class="token double-colon punctuation">::</span>IntegrationTest

  test <span class="token string-literal"><span class="token string">"should get home"</span></span> <span class="token keyword">do</span>
    get static_pages_home_url
    assert_response <span class="token symbol">:success</span>
    assert_select <span class="token string-literal"><span class="token string">"title"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Home | Ruby on Rails Tutorial Sample App"</span></span>

  <span class="token keyword">end</span>

  test <span class="token string-literal"><span class="token string">"should get help"</span></span> <span class="token keyword">do</span>
    get static_pages_help_url
    assert_response <span class="token symbol">:success</span>
    assert_select <span class="token string-literal"><span class="token string">"title"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Help | Ruby on Rails Tutorial Sample App"</span></span>
  <span class="token keyword">end</span>

  test <span class="token string-literal"><span class="token string">"should get about"</span></span> <span class="token keyword">do</span>
    get static_pages_about_url
    assert_response <span class="token symbol">:success</span>
    assert_select <span class="token string-literal"><span class="token string">"title"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"About | Ruby on Rails Tutorial Sample App"</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment">#assert_select automatically inserts the value to verify the link exists </span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">"test_helper"</span></span>

<span class="token keyword">class</span> <span class="token class-name">SiteLayoutTest</span> <span class="token operator">&lt;</span> ActionDispatch<span class="token double-colon punctuation">::</span>IntegrationTest
    
assert_select <span class="token string-literal"><span class="token string">"a[href=?]"</span></span><span class="token punctuation">,</span> root_path<span class="token punctuation">,</span> <span class="token symbol">count</span><span class="token operator">:</span> <span class="token number">2</span>
assert_select <span class="token string-literal"><span class="token string">"a[href=?]"</span></span><span class="token punctuation">,</span> help_path<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://i.imgur.com/aJ9WRDi.png" alt="image-20231105161812124"></p>
<p><strong>template system called Haml,</strong></p>
<pre class="line-numbers language-none"><code class="language-none">&lt;% provide(:title, &quot;Home&quot;) %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%&#x3D; yield(:title) %&gt; | Ruby on Rails Tutorial Sample App&lt;&#x2F;title&gt;
  &lt;&#x2F;head&gt;
  &lt;body&gt;
    &lt;h1&gt;Sample App&lt;&#x2F;h1&gt;
    &lt;p&gt;
      This is the home page for the
      &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;www.railstutorial.org&#x2F;&quot;&gt;Ruby on Rails Tutorial&lt;&#x2F;a&gt;
      sample application.
    &lt;&#x2F;p&gt;
  &lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>call the provide function with string “home” with label “title</p>
<p>the <strong><code>provide</code></strong> function and associate the string <strong><code>&quot;Home&quot;</code></strong> with the label <strong><code>:title</code></strong>.</p>
<p>use the closely related notation <strong><code>&lt;%= ... %&gt;</code></strong> to insert the title into the template using Ruby’s <strong><code>yield</code></strong> function:”</p>
<ul>
<li>distinction between the two types of embedded Ruby is that <strong><code>&lt;% ... %&gt;</code></strong> <em>executes</em> the code inside, while <strong><code>&lt;%= ... %&gt;</code></strong> executes it <em>and inserts</em> the result into the template</li>
</ul>
<h3 id="Helper-in-rails"><a href="#Helper-in-rails" class="headerlink" title="Helper in rails"></a>Helper in rails</h3><p><code>*app/helpers/application_helper.rb*</code></p>
<p>Like for the title we can have a helper function </p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">module</span> <span class="token class-name">ApplicationHelper</span>

  <span class="token comment"># Returns the full title on a per-page basis.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">full_title</span></span><span class="token punctuation">(</span>page_title <span class="token operator">=</span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">)</span>
    base_title <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Ruby on Rails Tutorial Sample App"</span></span>
    <span class="token keyword">if</span> page_title<span class="token punctuation">.</span>empty<span class="token operator">?</span>
      base_title
    <span class="token keyword">else</span>
      <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#&#123;</span><span class="token content">page_title</span><span class="token delimiter punctuation">&#125;</span></span><span class="token string"> | </span><span class="token interpolation"><span class="token delimiter punctuation">#&#123;</span><span class="token content">base_title</span><span class="token delimiter punctuation">&#125;</span></span><span class="token string">"</span></span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment"># then we can replace the original function with </span>
<span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> full_title<span class="token punctuation">(</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token symbol">:title</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token string-literal"><span class="token string">%>&lt;/title></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>One more time: yield is yielding the contents to a block</p>
<h3 id="Ruby-rush"><a href="#Ruby-rush" class="headerlink" title="Ruby rush!"></a>Ruby rush!</h3><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">puts <span class="token string-literal"><span class="token string">"foo"</span></span> <span class="token comment">#print string</span>

<span class="token comment">#method definition</span>
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">name</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
<span class="token keyword">end</span>

<span class="token comment">#array and split</span>
<span class="token string-literal"><span class="token string">"foo bar   baz"</span></span><span class="token punctuation">.</span>split
<span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"foo"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"bar"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"baz"</span></span><span class="token punctuation">]</span>

<span class="token symbol">method</span><span class="token operator">:</span>
<span class="token keyword">include</span><span class="token operator">?</span>
sort <span class="token operator">/</span> sort<span class="token operator">!</span>
reverse
shuffle

<span class="token punctuation">(</span><span class="token number">0.</span><span class="token number">.9</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a

a <span class="token operator">=</span> <span class="token string-literal"><span class="token string">%w[foo bar baz quux]</span></span>         <span class="token comment"># Use %w to make a string array.</span>

<span class="token comment">#Blocks</span>
<span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token punctuation">&#123;</span> <span class="token operator">|</span>i<span class="token operator">|</span> puts <span class="token number">2</span> <span class="token operator">*</span> i <span class="token punctuation">&#125;</span>
<span class="token number">2</span>
<span class="token number">4</span>
<span class="token number">6</span>
<span class="token number">8</span>
<span class="token number">10</span>

<span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>number<span class="token operator">|</span>
<span class="token operator">?</span><span class="token operator">></span>   puts <span class="token number">2</span> <span class="token operator">*</span> number
<span class="token operator">>></span>   puts <span class="token string-literal"><span class="token string">'--'</span></span>
<span class="token operator">>></span> <span class="token keyword">end</span>
<span class="token number">2</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">4</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">6</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">8</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">10</span>
<span class="token operator">-</span><span class="token operator">-</span>
    
<span class="token operator">>></span> <span class="token number">3.</span>times <span class="token punctuation">&#123;</span> puts <span class="token string-literal"><span class="token string">"Betelgeuse!"</span></span> <span class="token punctuation">&#125;</span>   <span class="token comment"># 3.times takes a block with no variables.</span>
<span class="token string-literal"><span class="token string">"Betelgeuse!"</span></span>
<span class="token string-literal"><span class="token string">"Betelgeuse!"</span></span>
<span class="token string-literal"><span class="token string">"Betelgeuse!"</span></span>
<span class="token operator">=></span> <span class="token number">3</span>
<span class="token operator">>></span> <span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map <span class="token punctuation">&#123;</span> <span class="token operator">|</span>i<span class="token operator">|</span> i<span class="token operator">**</span><span class="token number">2</span> <span class="token punctuation">&#125;</span>          <span class="token comment"># The ** notation is for 'power'.</span>
<span class="token operator">=></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span>
<span class="token operator">>></span> <span class="token string-literal"><span class="token string">%w[a b c]</span></span>                        <span class="token comment"># Recall that %w makes string arrays.</span>
<span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"a"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"b"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"c"</span></span><span class="token punctuation">]</span>
<span class="token operator">>></span> <span class="token string-literal"><span class="token string">%w[a b c]</span></span><span class="token punctuation">.</span>map <span class="token punctuation">&#123;</span> <span class="token operator">|</span>char<span class="token operator">|</span> char<span class="token punctuation">.</span>upcase <span class="token punctuation">&#125;</span>
<span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"A"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"B"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"C"</span></span><span class="token punctuation">]</span>
<span class="token operator">>></span> <span class="token string-literal"><span class="token string">%w[A B C]</span></span><span class="token punctuation">.</span>map <span class="token punctuation">&#123;</span> <span class="token operator">|</span>char<span class="token operator">|</span> char<span class="token punctuation">.</span>downcase <span class="token punctuation">&#125;</span>
<span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"a"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"b"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"c"</span></span><span class="token punctuation">]</span>

<span class="token operator">>></span> h1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token symbol">:name</span> <span class="token operator">=></span> <span class="token string-literal"><span class="token string">"Michael Hartl"</span></span><span class="token punctuation">,</span> <span class="token symbol">:email</span> <span class="token operator">=></span> <span class="token string-literal"><span class="token string">"michael@example.com"</span></span> <span class="token punctuation">&#125;</span>
<span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token symbol">:name</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"Michael Hartl"</span></span><span class="token punctuation">,</span> <span class="token symbol">:email</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"michael@example.com"</span></span><span class="token punctuation">&#125;</span>
<span class="token operator">>></span> h2 <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"Michael Hartl"</span></span><span class="token punctuation">,</span> <span class="token symbol">email</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"michael@example.com"</span></span> <span class="token punctuation">&#125;</span>
<span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token symbol">:name</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"Michael Hartl"</span></span><span class="token punctuation">,</span> <span class="token symbol">:email</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"michael@example.com"</span></span><span class="token punctuation">&#125;</span>
<span class="token operator">>></span> h1 <span class="token operator">==</span> h2
<span class="token operator">=></span> <span class="token boolean">true</span>
<span class="token comment">#The last example uses the useful inspect method, which returns a string with a literal representation of the object it’s called on:</span>
<span class="token operator">>></span> puts <span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a            <span class="token comment"># Put an array as a string.</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">5</span>
<span class="token operator">>></span> puts <span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a<span class="token punctuation">.</span>inspect    <span class="token comment"># Put a literal array.</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>


<span class="token operator">>></span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"foobar"</span></span><span class="token punctuation">)</span>
<span class="token operator">=></span> <span class="token string-literal"><span class="token string">"foobar"</span></span>
<span class="token operator">>></span> s<span class="token punctuation">.</span><span class="token keyword">class</span>                        <span class="token comment"># Find the class of s.</span>
<span class="token operator">=></span> <span class="token builtin">String</span>
<span class="token operator">>></span> s<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span>superclass             <span class="token comment"># Find the superclass of String.</span>
<span class="token operator">=></span> <span class="token builtin">Object</span>
<span class="token operator">>></span> s<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span>superclass<span class="token punctuation">.</span>superclass  <span class="token comment"># Ruby has a BasicObject base class as of 1.9</span>
<span class="token operator">=></span> BasicObject
<span class="token operator">>></span> s<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span>superclass<span class="token punctuation">.</span>superclass<span class="token punctuation">.</span>superclass
<span class="token operator">=></span> <span class="token keyword">nil</span>

<span class="token comment">#define a class</span>
<span class="token operator">>></span> <span class="token keyword">class</span> <span class="token class-name">Word</span> <span class="token operator">&lt;</span> <span class="token builtin">String</span>             <span class="token comment"># Word inherits from String.</span>
<span class="token operator">>></span>   <span class="token comment"># Returns true if the string is its own reverse.</span>
<span class="token operator">>></span>   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">palindrome</span></span><span class="token operator">?</span>
<span class="token operator">>></span>     <span class="token keyword">self</span> <span class="token operator">==</span> <span class="token keyword">self</span><span class="token punctuation">.</span>reverse        <span class="token comment"># self is the string itself.</span>
<span class="token operator">>></span>   <span class="token keyword">end</span>
<span class="token operator">>></span> <span class="token keyword">end</span>
<span class="token operator">=></span> <span class="token keyword">nil</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Using-css-bootstrap-in-rails"><a href="#Using-css-bootstrap-in-rails" class="headerlink" title="Using css (bootstrap) in rails"></a>Using css (bootstrap) in rails</h3><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; gem file
.
gem &quot;rails&quot;,           &quot;7.0.4&quot;
gem &quot;bootstrap-sass&quot;,  &quot;3.4.1&quot;
gem &quot;sassc-rails&quot;,     &quot;2.1.2&quot;
gem &quot;sprockets-rails&quot;, &quot;3.4.2&quot;

@import &quot;bootstrap-sprockets&quot;;
@import &quot;bootstrap&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>app/views/layouts/_footer.html.erb</em><br>-&gt; &lt;%= render ‘layouts/footer’ %&gt;</p>
<ul>
<li><strong><code>app/assets</code></strong>: assets specific to the present application</li>
<li><strong><code>lib/assets</code></strong>: assets for libraries written by your dev team</li>
<li><strong><code>vendor/assets</code></strong>: assets from third-party vendors (not present by default)</li>
</ul>
<h3 id="Rails-routes"><a href="#Rails-routes" class="headerlink" title="Rails routes"></a>Rails routes</h3><pre class="line-numbers language-none"><code class="language-none">&lt;a href&#x3D;&quot;&#x2F;static_pages&#x2F;about&quot;&gt;About&lt;&#x2F;a&gt;
-&gt; 
&lt;%&#x3D; link_to &quot;About&quot;, about_path %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Examples of routes:</p>
<p><img src="https://i.imgur.com/IZOl4bu.png" alt="image-20231105131623737"></p>
<h4 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h4><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">root <span class="token string-literal"><span class="token string">"static_pages#home"</span></span>
root_path <span class="token operator">-</span><span class="token operator">></span> <span class="token string-literal"><span class="token string">'/'</span></span>
root_url  <span class="token operator">-</span><span class="token operator">></span> <span class="token string-literal"><span class="token string">'http://www.example.com/'</span></span>
get <span class="token string-literal"><span class="token string">"static_pages/help"</span></span> <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> get <span class="token string-literal"><span class="token string">"/help"</span></span><span class="token punctuation">,</span> <span class="token symbol">to</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"static_pages#help"</span></span>
<span class="token operator">/</span><span class="token operator">/</span> it will create two name space help_path <span class="token keyword">and</span> help_url  <span class="token operator">:</span>
help_path <span class="token operator">-</span><span class="token operator">></span> <span class="token string-literal"><span class="token string">'/help'</span></span>
help_url  <span class="token operator">-</span><span class="token operator">></span> <span class="token string-literal"><span class="token string">'http://www.example.com/help'</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Then-we-try-tests"><a href="#Then-we-try-tests" class="headerlink" title="Then we try tests:"></a>Then we try tests:</h4><pre class="line-numbers language-none"><code class="language-none">$ rails generate integration_test site_layout
      invoke  test_unit
      create    test&#x2F;integration&#x2F;site_layout_test.rb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Rails generator automatically appends <strong><code>_test</code></strong> to the name of the test file.</p>
<p><strong>Tips: gem “tzinfo-data”</strong> do not include platform to avoid error with timezone</p>
<p><img src="https://i.imgur.com/drCMurB.png" alt="image-20231105170406483"></p>
<p>User:</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token operator">&lt;</span> ApplicationRecord
  before_save <span class="token punctuation">&#123;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">.</span>downcase <span class="token punctuation">&#125;</span>
  validates <span class="token symbol">:name</span><span class="token punctuation">,</span>  <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token symbol">length</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token symbol">maximum</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">&#125;</span>
  <span class="token constant">VALID_EMAIL_REGEX</span> <span class="token operator">=</span> <span class="token regex-literal"><span class="token regex">/\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i</span></span>
  validates <span class="token symbol">:email</span><span class="token punctuation">,</span> <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token symbol">length</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token symbol">maximum</span><span class="token operator">:</span> <span class="token number">255</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token symbol">format</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token symbol">with</span><span class="token operator">:</span> <span class="token constant">VALID_EMAIL_REGEX</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">#Validating the uniqueness of email addresses</span>
                    <span class="token symbol">uniqueness</span><span class="token operator">:</span> uniqueness<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token symbol">case_sensitive</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span>
  has_secure_password
  validates <span class="token symbol">:password</span><span class="token punctuation">,</span> <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token symbol">length</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token symbol">minimum</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">&#125;</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>Uniqueness Validation</strong></p>
<p> test for rejection of duplicate email addresses</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">"test_helper"</span></span>

<span class="token keyword">class</span> <span class="token class-name">UserTest</span> <span class="token operator">&lt;</span> ActiveSupport<span class="token double-colon punctuation">::</span>TestCase

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">setup</span></span>
    <span class="token variable">@user</span> <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"Example User"</span></span><span class="token punctuation">,</span> <span class="token symbol">email</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"user@example.com"</span></span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
  <span class="token punctuation">.</span>
  <span class="token punctuation">.</span>
  <span class="token punctuation">.</span>
  test <span class="token string-literal"><span class="token string">"email addresses should be unique"</span></span> <span class="token keyword">do</span>
    duplicate_user <span class="token operator">=</span> <span class="token variable">@user</span><span class="token punctuation">.</span>dup
    <span class="token variable">@user</span><span class="token punctuation">.</span>save
    assert_not duplicate_user<span class="token punctuation">.</span>valid<span class="token operator">?</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">rails generate migration add_index_to_users_email
_______________
rails generate migration add_password_digest_to_users password_digest:string

class AddPasswordDigestToUsers &lt; ActiveRecord::Migration[7.0]
  def change
    add_column :users, :password_digest, :string
  end
end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">class AddIndexToUsersEmail &lt; ActiveRecord::Migration[7.0]
  def change
    add_index :users, :email, unique: true
  end
end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Then migrate to guarantee unique index</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/08/NextJS-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/10/08/NextJS-1/" itemprop="url">NextJS-1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-10-08T15:33:46+02:00">
                2023-10-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NextJS/" itemprop="url" rel="index">
                    <span itemprop="name">NextJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>‘use client’ : client side rendering</p>
<p>state management (react hook)</p>
<p><img src="https://i.imgur.com/17fuE5f.png" alt="image-20231008153916697"></p>
<h1 id="How-to-fetch-data"><a href="#How-to-fetch-data" class="headerlink" title="How to fetch data?"></a>How to fetch data?</h1><ol>
<li>server site rendering SSR</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>param<span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fectch</span> <span class="token punctuation">(</span>
		<span class="token string">'url'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token string">'no-store'</span><span class="token punctuation">&#125;</span> <span class="token comment">// don't store it</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">...</span><span class="token punctuation">.</span>
    <span class="token punctuation">)</span> <span class="token comment">// refetch every single time -> server side rendering</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; server site generating saving it
async function Page(&#123;param&#125;) &#123;
	const res &#x3D; await fectch (
		&#39;url&#39;
	);
	const data &#x3D; await res.json()
    return (
    	....
    ) &#x2F;&#x2F; refetch every single time -&gt; server side rendering
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>Incremental Static Generation  (ISR)</li>
</ol>
<p>{ next : {revalidate:10}}</p>
<h4 id="Link-in-nextJs"><a href="#Link-in-nextJs" class="headerlink" title="Link in nextJs"></a>Link in nextJs</h4><p>Instead of ahref use <Link> intead</Link></p>
<p>the <code>Link</code> component is similar to using <code>&lt;a&gt;</code> tags, but instead of <code>&lt;a href=&quot;…&quot;&gt;</code>, you use <code>&lt;Link href=&quot;…&quot;&gt;</code></p>
<h4 id="Pattern-Showing-active-links"><a href="#Pattern-Showing-active-links" class="headerlink" title="Pattern: Showing active links"></a>Pattern: Showing active links</h4><p>Since <a target="_blank" rel="noopener" href="https://nextjs.org/docs/app/api-reference/functions/use-pathname"><code>usePathname()</code></a> is a hook, you’ll need to turn <code>nav-links.tsx</code> into a Client Component. Add React’s <code>&quot;use client&quot;</code> directive to the top of the file, then import <code>usePathname()</code> from <code>next/navigation</code></p>
<pre class="line-numbers language-react" data-language="react"><code class="language-react">&#39;use client&#39;;
 
import &#123;
  UserGroupIcon,
  HomeIcon,
  InboxIcon,
&#125; from &#39;@heroicons&#x2F;react&#x2F;24&#x2F;outline&#39;;
import Link from &#39;next&#x2F;link&#39;;
import &#123; usePathname &#125; from &#39;next&#x2F;navigation&#39;;
 
&#x2F;&#x2F; ...
export default function NavLinks() &#123;
  const pathname &#x3D; usePathname();
  &#x2F;&#x2F; ...
&#125;

&#x2F;&#x2F;data fetching
const revenue &#x3D; await fetchRevenue();
const latestInvoices &#x3D; await fetchLatestInvoices(); &#x2F;&#x2F; wait for fetchRevenue() to finish
const &#123;
  numberOfInvoices,
  numberOfCustomers,
  totalPaidInvoices,
  totalPendingInvoices,
&#125; &#x3D; await fetchCardData(); &#x2F;&#x2F; wait for fetchLatestInvoices() to finish

&#x2F;&#x2F; these are running in sequence <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Parallel-data-fetching"><a href="#Parallel-data-fetching" class="headerlink" title="Parallel data fetching"></a>Parallel data fetching</h4><p>In JavaScript, you can use the <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"><code>Promise.all()</code></a> or <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled"><code>Promise.allSettled()</code></a> functions to initiate all promises at the same time. For example, in <code>data.ts</code>, we’re using <code>Promise.all()</code> in the <code>fetchCardData()</code> function:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchCardData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> invoiceCountPromise <span class="token operator">=</span> sql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT COUNT(*) FROM invoices</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> customerCountPromise <span class="token operator">=</span> sql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT COUNT(*) FROM customers</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> invoiceStatusPromise <span class="token operator">=</span> sql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT
         SUM(CASE WHEN status = 'paid' THEN amount ELSE 0 END) AS "paid",
         SUM(CASE WHEN status = 'pending' THEN amount ELSE 0 END) AS "pending"
         FROM invoices</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
 
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      invoiceCountPromise<span class="token punctuation">,</span>
      customerCountPromise<span class="token punctuation">,</span>
      invoiceStatusPromise<span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/12/WebSecurity1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/09/12/WebSecurity1/" itemprop="url">WebSecurity1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-09-12T22:38:48+02:00">
                2023-09-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>DNS Domain name system</p>
<p>​                                    Root Name Server</p>
<p>Client  $\leftarrow$ DNS Server  $\leftrightarrow$                           “.edu” Name server</p>
<p>​                                    “stanford.edu” Name server</p>
<p>Type a URL and press enter</p>
<ol>
<li>Client ask DNS Recursive Resolver to lookup a hostname (standford.edu)</li>
<li>DNS Recursive Resolver sends DNS query to Root Name server</li>
<li>DNS Recursive Resolver sends DNS query to TLD Name server</li>
</ol>
<h2 id="DNS-hjacking"><a href="#DNS-hjacking" class="headerlink" title="DNS hjacking"></a>DNS hjacking</h2><p>The attacker changes DNS recodes of target to point to own IP address, so all visitors are </p>
<p>directed to the attacker’s web server.</p>
<p>Several ways to achieve this </p>
<ul>
<li>Malware changes user’s local DNS settings</li>
<li>Hacked recursive DNS resolver</li>
<li>Hacked router</li>
<li>Hacked DNS nameserver</li>
<li>Compromised user account at DNS provider</li>
</ul>
<p><img src="https://i.imgur.com/l8NQAho.png" alt="image-20231001154425032"></p>
<h2 id="DNS-privacy"><a href="#DNS-privacy" class="headerlink" title="DNS privacy"></a>DNS privacy</h2><p>Queries are plaintext. </p>
<p><strong>Pro ti[:</strong> switch DNS settings to Cloudflare (1.1.1.1) or another provider with good privacy policy</p>
<p>Http is a client-server model which is simple,extensible, stateless and transport protocol agnostic</p>
<p><img src="https://i.imgur.com/4wfhYxA.png" alt="image-20231001162729542"></p>
<ul>
<li>200 ok</li>
<li>206 Partial Content</li>
</ul>
<p><img src="https://i.imgur.com/hfpoN4u.png" alt="image-20231001163027378"></p>
<p><img src="https://i.imgur.com/iCdi9Fx.png" alt="image-20231001163502925"></p>
<p>Full process of request</p>
<p><img src="https://i.imgur.com/mmWAfNB.png" alt="image-20231001165442747"></p>
<h2 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h2><p>make cookie <strong>Path</strong> secure</p>
<p>Cookies can only be accessed by equal or more-specific domains, so use a subdomain</p>
<ul>
<li><p>Just set it to Path =/ and don’t ever rely on it</p>
<p>Set-Cookie: key = value; Secure; HttpOnly; Path =/</p>
</li>
</ul>
<p>Cookie only send through http, So like javascript running on the server can not see the cookie</p>
<h2 id="Problem-with-ambient-authority"><a href="#Problem-with-ambient-authority" class="headerlink" title="Problem with ambient authority"></a>Problem with ambient authority</h2><p>Unclear which site initiated a request: request from attacker will be included</p>
<p><strong>Cross-Site Request Forgery(CSRF)</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/08/04/React-P3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/08/04/React-P3/" itemprop="url">React-P1.5</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-08-04T15:15:08+02:00">
                2023-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>When may not need UseEffect</p>
<p><a target="_blank" rel="noopener" href="https://react.dev/learn/you-might-not-need-an-effect">https://react.dev/learn/you-might-not-need-an-effect</a></p>
<p>File structure</p>
<h4 id="Project-Structure-Export-Group"><a href="#Project-Structure-Export-Group" class="headerlink" title="Project Structure - Export Group"></a>Project Structure - Export Group</h4><ul>
<li>create Example directory</li>
<li>setup two components (setup simple returns) and index.jsx file</li>
<li>in index.jsx setup return and render both components (import)</li>
<li>import/render index.jsx in App.jsx</li>
</ul>
<h4 id="Project-Structure-Extra-Extensions"><a href="#Project-Structure-Extra-Extensions" class="headerlink" title="Project Structure - Extra Extensions"></a>Project Structure - Extra Extensions</h4><p>- code spell checker - works well with code and documents.</p>
<p>- glean - easy extract JSX into a new component</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/07/17/React-P2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Meng Zhouyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Melo's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/07/17/React-P2/" itemprop="url">React-P2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-07-17T13:50:44+02:00">
                2023-07-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Backroads-App"><a href="#Backroads-App" class="headerlink" title="Backroads App"></a>Backroads App</h1><p><a target="_blank" rel="noopener" href="https://backroads-app.netlify.app/">Working Application - Deployed</a></p>
<ul>
<li>backroads-html - working html/css/javascript project (contains assets)</li>
<li>final(complete source code) - working react application<ul>
<li>navigate to the folder</li>
<li>run ‘npm install’</li>
<li>once the dependencies are installed run ‘npm start’</li>
</ul>
</li>
</ul>
<h4 id="Create-New-React-App"><a href="#Create-New-React-App" class="headerlink" title="Create New React App"></a>Create New React App</h4><ul>
<li>install</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npx create-react-app@latest backroads-app<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>run dev server</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="SRC-Folder-boilerplate"><a href="#SRC-Folder-boilerplate" class="headerlink" title="SRC Folder (boilerplate)"></a>SRC Folder (boilerplate)</h4><ul>
<li>index.js</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>

<span class="token comment">// styles (typically global)</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>

<span class="token comment">// convention to name it App and setup in a separate file</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token comment">// import report web vitals</span>
<span class="token keyword">import</span> reportWebVitals <span class="token keyword">from</span> <span class="token string">'./reportWebVitals'</span>

<span class="token comment">// StrictMode</span>

<span class="token comment">// StrictMode is a tool for highlighting potential problems in an application.Activates additional checks and warnings for its descendants.Runs only in Development, does not impact the production build. RENDERS TWICE !!! Possible to remove.</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span>
<span class="token punctuation">)</span>

<span class="token comment">// If you want to start measuring performance in your app, pass a function</span>
<span class="token comment">// to log results (for example: reportWebVitals(console.log))</span>
<span class="token comment">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span>
<span class="token function">reportWebVitals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>remove in src</p>
<ul>
<li>setupTests.js</li>
<li>reportWebVitals.js</li>
<li>App.test.js</li>
</ul>
</li>
<li><p>be careful with multiple css files</p>
</li>
</ul>
<p>App.js</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>backroads app<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>remove<ul>
<li>remove logo.svg</li>
<li>App.css</li>
</ul>
</li>
</ul>
<h4 id="Setup-Structure"><a href="#Setup-Structure" class="headerlink" title="Setup Structure"></a>Setup Structure</h4><ul>
<li><p>public/index.html</p>
<ul>
<li>change title</li>
<li>copy/paste font-awesome link (from html project)</li>
</ul>
</li>
<li><p>index.css</p>
<ul>
<li>copy/paste css (from html project - css/styles.css)</li>
<li>error in line 209, just comment out for now</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/* .hero &#123;
    background: linear-gradient(rgb(44, 174, 186, 0.7), rgba(0, 0, 0, 0.7)),
      url('../images/main.jpeg') center/cover no-repeat;
  &#125; */</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>src folder<ul>
<li>copy/paste images folder (from html project)</li>
<li>move favicon.ico to public</li>
</ul>
</li>
<li>App.js<ul>
<li>refactor to <React.Fragment></React.Fragment></li>
<li>copy/paste all the content within body tags, up to <script> (index.html)</li>
<li>select all “class” instances and refactor to “className” (CMD + D)</li>
<li>fix the comment bug (remove or comment out)</li>
<li>don’t worry about - Using target=”_blank” without rel=”noreferrer” warning,<br>will fix it later</li>
<li>move README.md from final to current project</li>
</ul>
</li>
</ul>
<h4 id="Setup-Components"><a href="#Setup-Components" class="headerlink" title="Setup Components"></a>Setup Components</h4><ul>
<li>in src create components folder</li>
<li>in the components create following files<ul>
<li>Navbar.js</li>
<li>Hero.js</li>
<li>About.js</li>
<li>Services.js</li>
<li>Tours.j</li>
<li>Footer.js</li>
</ul>
</li>
<li>setup components with default export (snippet - rafce)</li>
<li>carefully move the code from App.js into components (files)<ul>
<li>hint - look for navbar, footer and section tags</li>
</ul>
</li>
<li>App.js should be empty</li>
<li>import and render all components in App.js (try auto imports)</li>
<li>result is going to be the same, it’s just easier to manage the code</li>
<li>again, it’s just my preference to split up code in such way.<br>You can split it up in any way that makes the most sense to you.</li>
</ul>
<h4 id="Navbar"><a href="#Navbar" class="headerlink" title="Navbar"></a>Navbar</h4><ul>
<li>first let’s fix the image (logo)<ul>
<li>setup import from images and update source</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// import</span>
<span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">'../images/logo.svg'</span>

<span class="token comment">// JSX</span>
<span class="token punctuation">;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">&#123;</span>logo<span class="token punctuation">&#125;</span> className<span class="token operator">=</span><span class="token string">'nav-logo'</span> alt<span class="token operator">=</span><span class="token string">'backroads'</span> <span class="token operator">/</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Smooth-Scroll"><a href="#Smooth-Scroll" class="headerlink" title="Smooth Scroll"></a>Smooth Scroll</h4><ul>
<li>html/css feature</li>
</ul>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- link --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#services<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> services <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- element --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>services<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">&#123;</span>
  <span class="token property">scroll-behavior</span><span class="token punctuation">:</span> smooth<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.section</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/* navbar height */</span>
  <span class="token property">scroll-margin-top</span><span class="token punctuation">:</span> 4rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Page-Links"><a href="#Page-Links" class="headerlink" title="Page Links"></a>Page Links</h4><ul>
<li>refactor repeating code</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>li<span class="token operator">></span>
  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">'#home'</span> className<span class="token operator">=</span><span class="token string">'nav-link'</span><span class="token operator">></span>
    home
  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>figure out which data is repeating hint (href, text )</li>
<li>in src create data.js and setup a structure<ul>
<li>(hint - [{property:value},{property:value}])</li>
</ul>
</li>
<li>export/import iterate over the list,return elements and inject data</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> pageLinks <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'#home'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'home'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'#about'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'about'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'#services'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'services'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'#tours'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'tours'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> pageLinks <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../data'</span>

<span class="token punctuation">&#123;</span>
  pageLinks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">link</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">&#123;</span>link<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">&#123;</span>link<span class="token punctuation">.</span>href<span class="token punctuation">&#125;</span> className<span class="token operator">=</span><span class="token string">'nav-link'</span><span class="token operator">></span>
          <span class="token punctuation">&#123;</span>link<span class="token punctuation">.</span>text<span class="token punctuation">&#125;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Nav-Icons-social-links"><a href="#Nav-Icons-social-links" class="headerlink" title="Nav Icons (social-links)"></a>Nav Icons (social-links)</h4><ul>
<li>repeat the same steps (as with page links)</li>
<li>add rel=’noreferrer’</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
  socialLinks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">link</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> id<span class="token punctuation">,</span> href<span class="token punctuation">,</span> icon <span class="token punctuation">&#125;</span> <span class="token operator">=</span> link
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">&#123;</span>href<span class="token punctuation">&#125;</span> target<span class="token operator">=</span><span class="token string">'_blank'</span> rel<span class="token operator">=</span><span class="token string">'noreferrer'</span> className<span class="token operator">=</span><span class="token string">'nav-icon'</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token punctuation">&#123;</span>icon<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Hero"><a href="#Hero" class="headerlink" title="Hero"></a>Hero</h4><ul>
<li>change title or text (optional)</li>
<li>fix the image (path in css)</li>
</ul>
<h4 id="About"><a href="#About" class="headerlink" title="About"></a>About</h4><ul>
<li>fix the image (hint - just like with logo in the navbar)</li>
</ul>
<h4 id="Section-Title"><a href="#Section-Title" class="headerlink" title="Section Title"></a>Section Title</h4><ul>
<li>in components create Title.js</li>
<li>get the structure from one of the sections</li>
<li>setup two props</li>
<li>replace in About, Services, Tours</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">Title</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> title<span class="token punctuation">,</span> subTitle <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'section-title'</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>h2<span class="token operator">></span>
        <span class="token punctuation">&#123;</span>title<span class="token punctuation">&#125;</span> <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">&#123;</span>subTitle<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Title<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>About.js</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// import</span>
<span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">'./Title'</span>

<span class="token comment">// display</span>
<span class="token punctuation">;</span><span class="token operator">&lt;</span>Title title<span class="token operator">=</span><span class="token string">'about'</span> subTitle<span class="token operator">=</span><span class="token string">'us'</span> <span class="token operator">/</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h4><ul>
<li>refactor repeating code (hint - just like with page and social links)<ul>
<li>setup data, export/import, iterate</li>
</ul>
</li>
</ul>
<p>data.js</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> services <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-wallet fa-fw'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'saving money'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Lorem ipsum dolor sit amet consectetur adipisicing elit.Asperiores, officia'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// rest of the objects</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Services.js</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Title <span class="token keyword">from</span> <span class="token string">'./Title'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> services <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../data'</span>
<span class="token keyword">const</span> <span class="token function-variable function">Services</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>section className<span class="token operator">=</span><span class="token string">'section services'</span> id<span class="token operator">=</span><span class="token string">'services'</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>Title title<span class="token operator">=</span><span class="token string">'our'</span> subTitle<span class="token operator">=</span><span class="token string">'services'</span> <span class="token operator">/</span><span class="token operator">></span>

      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'section-center services-center'</span><span class="token operator">></span>
        <span class="token punctuation">&#123;</span>services<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">service</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> id<span class="token punctuation">,</span> icon<span class="token punctuation">,</span> title<span class="token punctuation">,</span> text <span class="token punctuation">&#125;</span> <span class="token operator">=</span> service
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>article className<span class="token operator">=</span><span class="token string">'service'</span> key<span class="token operator">=</span><span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">'service-icon'</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token punctuation">&#123;</span>icon<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
              <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'service-info'</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>h4 className<span class="token operator">=</span><span class="token string">'service-title'</span><span class="token operator">></span><span class="token punctuation">&#123;</span>title<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">></span>
                <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">'service-text'</span><span class="token operator">></span><span class="token punctuation">&#123;</span>text<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>article<span class="token operator">></span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Services<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Tours"><a href="#Tours" class="headerlink" title="Tours"></a>Tours</h4><ul>
<li>refactor repeating code</li>
</ul>
<h4 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h4><ul>
<li>refactor repeating code</li>
<li>re-use page and social links</li>
<li>in the <span id="date">provide current year (hint - {})</li>
</ul>
<h4 id="Alternative-Approach-optional"><a href="#Alternative-Approach-optional" class="headerlink" title="Alternative Approach (optional)"></a>Alternative Approach (optional)</h4><ul>
<li>in components create PageLinks.js</li>
<li>import pageLinks</li>
<li>return the entire list and replace current setup in Navbar, Footer</li>
<li>“gotcha”<ul>
<li>the more “moving parts” you will have the harder it’s going to be to manage</li>
<li>my personal preference, if possible just use data</li>
</ul>
</li>
</ul>
<h4 id="Challenge-optional"><a href="#Challenge-optional" class="headerlink" title="Challenge (optional)"></a>Challenge (optional)</h4><ul>
<li>create more components (essentially, split up the code more)</li>
<li>find all map methods and move elements to separate components</li>
<li>By the end of the video you should have four additional components<ul>
<li>Tour.js</li>
<li>Service.js</li>
<li>SocialLink.js</li>
<li>PageLink.js</li>
</ul>
</li>
</ul>
<h4 id="Continuous-Deployment"><a href="#Continuous-Deployment" class="headerlink" title="Continuous Deployment"></a>Continuous Deployment</h4><ul>
<li><p>fix warnings (About Section)</p>
</li>
<li><p>netlify account</p>
</li>
<li>github account</li>
<li><p>basic git commands :</p>
<ul>
<li>remove existing git repo<ul>
<li>Mac : rm -rf .git</li>
<li>Windows : rmdir -Force -Recurse .git</li>
<li>Windows : rd /s /q .git<br>Windows commands were shared by students and I have not personally tested them.</li>
</ul>
</li>
<li>setup new repo<ul>
<li>git init<br>create an empty git repository</li>
<li>git add<br>adds new or changed files in your working directory<br>to the Git staging area</li>
<li>git add .<br>adds entire project<br>apart from files/directories specified in .gitignore</li>
<li>git commit -m “first commit”<br>A shortcut command that immediately creates a commit<br>with a passed commit message.</li>
<li>push to github<br>git remote add origin git@github.com:your-profile/repo-name.git<br>git branch -M main<br>git push -u origin main</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Benefits"><a href="#Benefits" class="headerlink" title="Benefits"></a>Benefits</h4><ul>
<li>don’t need to keep project locally</li>
<li>automatic builds</li>
</ul>
<h4 id="Warnings-“Gotcha”"><a href="#Warnings-“Gotcha”" class="headerlink" title="Warnings “Gotcha”"></a>Warnings “Gotcha”</h4><ul>
<li>Netlify treats warnings as errors</li>
</ul>
<p>package.json</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"CI= react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"local-build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test"</span><span class="token punctuation">,</span>
    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</script></li></ul></li></ul>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/touxiang.jpg"
                alt="Meng Zhouyang" />
            
              <p class="site-author-name" itemprop="name">Meng Zhouyang</p>
              <p class="site-description motion-element" itemprop="description">A blog to save my notes</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:zmeng18cc@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Meng Zhouyang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>








        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
